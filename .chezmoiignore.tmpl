# Ignore project files that shouldn't be in the destination directory.
README.md
install.sh

# This is the symmetrically encrypted master key. The run_before_ script reads
# it from the source directory, but it should never be placed in the destination.
private_dot_config/age/secret_key.txt.age-symmetric

{{/*
  Conditionally ignore files that require the age key for decryption.
  This block is only active if the primary age key does NOT exist.
*/}}
{{- $keyPath := joinPath .chezmoi.homeDir ".config" "age" "key.txt" -}}
{{- if not (stat $keyPath) -}}

# The age key is not present, so ignore any files that need it.
# This prevents decryption errors when running `chezmoi apply` without a password.
encrypted_private_dot_config/rclone/secrets.conf.age

{{- end -}}
